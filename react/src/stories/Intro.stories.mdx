import { useState } from "react"
import {
  Meta,
  Story,
  Canvas,
  Source,
  DocsContainer,
} from "@storybook/addon-docs/blocks"
import { addons } from "@storybook/addons"
import { styled } from "@storybook/theming"
import dedent from "dedent"
import Button from "../components/Button"
import HowMany from "../components/HowMany"
import theme, { useTheme } from "../theme"
import pckg from "../../package.json"
import { theme as managerTheme } from "../../.storybook/manager"

<Meta title="README" />

# Introduction

This is a React journal and demo container for <b><em>emwaves.org</em></b>.

## How to use

On the left of your screen there is a sidebar. You can click on it randomly, or in an orderly fashion. You are also welcome to click nothing.

## Tools I used

export const CurrentVersion = () => {
  return <strong>{pckg.version}</strong>
}

Version <CurrentVersion /> is supported by the following libraries from NPM.

### Dependency list

export const DependencyList = () => {
  const [showList, setShowList] = useState(false)
  const UL = styled.ul`
    & > li {
      list-style: none;
    }
  `
  const Details = styled.details`
    &:hover > summary,
    &:hover > summary::marker {
      color: black;
      cursor: pointer;
    }
    & > summary,
    & > summary::marker {
      color: lightgrey;
      font-family: monospace;
      line-height: 15px;
    }
  `
  const formatDependency = (dependency, version) => {
    return (
      <>
        <strong>{`${dependency} `}</strong>
        {`${version}`}
      </>
    )
  }
  const dependencies = Object.keys(pckg.dependencies).map((dependency) => (
    <li key={dependency}>
      {formatDependency(dependency, pckg.dependencies[dependency])}
    </li>
  ))
  const devDependencies = Object.keys(
    pckg.devDependencies,
  ).map((dependency) => (
    <li key={dependency}>
      {formatDependency(dependency, pckg.devDependencies[dependency])}
    </li>
  ))
  return (
    <>
      <UL>{dependencies}</UL>
      <Button small variant="subtle" onClick={() => setShowList(!showList)}>
        {`${showList ? "hide" : "show"} dev dependencies`}
      </Button>
      {showList && <UL>{devDependencies}</UL>}
    </>
  )
}

<DependencyList />

### Storybook

It's been <HowMany days="11/12/2017" /> since I started using Storybook professionally to write and document React components. Storybook's framework is useful because I can include source code and components directly in my markdown with minimal setup and coding.

<Source
  dark
  language="jsx"
  code={dedent`
    <Button onClick={() => setPartyMode(true)}>
      Party
    </Button>
  `}
/>

export const ButtonPoster = () => {
  const { setTheme } = useTheme()
  const Container = styled.div`
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
    justify-content: flex-start;
    max-width: 500px;
    box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.25);
    padding-bottom: 1rem;
    padding-left: 1rem;
    & > div {
      margin-right: 1rem;
      margin-top: 1rem;
    }
  `
  const setPartyMode = () => console.log("ðŸŽ‰ðŸŽ‰ðŸŽ‰ðŸŽ‰ðŸŽ‰ðŸŽ‰")
  return (
    <Container>
      {theme.variants.keys.map((variant) => {
        return (
          <div key={variant}>
            <Button onClick={() => setTheme("colbalt-neon")} variant={variant}>
              party
            </Button>
          </div>
        )
      })}
    </Container>
  )
}

<ButtonPoster />

### Styled Components

export const NpmLink = styled.code`
  text-decoration: none;
  & > a {
    font-family: monospace;
  }
`

I've used <NpmLink>[styled-components](https://github.com/styled-components)</NpmLink> for <HowMany days="10/02/2020" />! I recommend it. ðŸ’…
